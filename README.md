# MACD-Strategy-Analysis
Program used to provide details about the effectiveness of the MACD strategy in the NASDAQ E-MINI Futures market.

Report: 

-27300.00 of standard MACD run (from date 6/11)

This is the PNL (profit and loss) represented by a bare-bone robotic MACD strategy. I say robotic and bare bone 
because there are no other additional confluences given other than the MACD and signal lines. 

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Background:

A little background about the MACD strategy. The MACD (moving average convergence/divergence) is a technical indicator originally used for 
securities, created by a man named Gerald Appel in the 1970s. It is meant to depict the direction of the momentum of price.
To this day, the MACD is an extremely popular indicator. If you were to search up on youtube "trading indicator", and then sort by most amount of views, 
"Most Effective MACD Strategy for Daytrading Crypto, Forex & Stocks (High Winrate Strategy)" is the third video, with a whopping 2.3 million views. 
From a more personal standpoint, a trading youtuber I watched swore by the MACD indicator, saying things like "oh its so easy" and "anyone can do it". 
Well if it is, then why doesn't everyone use it? Well its not that simple actually.

For those who don't know, the MACD and signal lines are calculated by different exponential moving averages (EMA's),
taking the EMA of each candle close since the start of the data set as far back as possible. Throughout trading, traders observe 
that certain EMA's under certain timeframes can be used an indicator of where price will either comeback to, or fall. 

For the MACD strategy, it is used as a "momentum" indicator. When the MACD line moves above the signal line, it is a bullish indicator 
(bullish usually refers to price going up). When the MACD line moves below the signal line, it is a bearish (refering to price decreasing) signal. 
Sounds simple right? Well thats all it is. 

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Some Context:

The data from this rudimentary backtest shows that the MACD on first glance is not profitable at all. Infact, it puts you deep in debt. So how can this be?
Well for one, the backtest took every signal it got as a trade. On first glance this doesn't seem like a bad thing, but the human aspect is important in 
trading for this reason; that not every trade signal is a smart one. For example, you might get a signal to buy, but what you didn't know is that there is 
breaking news in the tech industry that will disrupt the market intensely, and cause the price to drop (a lot of these news "events" are scheduled, so typically 
traders know when the market will be impacted by certain news). 

Another issue is one fundementally with the MACD strat. MACD is supposed to depict the momentum of price. However, it only is a reflection of price movement. 
Price moves because of an imbalance of buyers and sellers. So if the volume of market participants was low, theoretically, a single trader can move the market by 
points if they wanted to. Is that true momentum? If one person were to sell 10 contracts and move the NASDAQ E-MINI futures by 3 points, and then a bank decides 
to slam the bid, the market can move up by 10 to 15 points. What the MACD fails to do is reflect volume (number of market participants).

To take note of this, on the graph of buy/sell signals generated by the backtest, many of the signals came during overnight sessions, which is ususally when there is lower 
volume compared to RTH (regular trading hours). During these hours it is much easier to have false signals be displayed. 

Another issue of the MACD is that often it is delayed. Trading indicators like the MACD are inherently "this happened" indicators. It is not common to see buy/sell 
signals after the move has occured. This is especially prominent on range days (days where price is going "sideways" stuck between a range of price going up/down constantly
without any real direction). Especially on tight range days, where there is inherently no momentum to one certain side, the MACD is virtually useless, and yet it 
will generate signals.

For example: 
On April 18, after a big move down during the opening, the market started to move sideways. At around 11:10, the MACD indicated a buy signal, but the market remained 
to move sideways, and eventually signals for a sell and 14:10 for a loss. Once again, it signals for a buy, and this time you sell for an even greater loss. This was suring a 
50 point range. For one, volume during "lunch time" is often much lower, and not only that, the price is clearly reflecting that of a range, and yet we recieve signals to enter
trades. This is why when it comes to a strategy like the MACD, the human factor is very important.

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Analysis: 

After gathering various data parameters about the trade taken during a period of 3 months, I began to filter and sort the data to look for any patterns or indications of what can be 
improved in the MACD Strategy. Keep in mind, the MACD strat can be set to have different signal parameters (like changing the EMAs) but for simplicity I kept it to the default and what is 
most normally used. 

For starters, lets look at some basic statistics of the data collected. 

![image](https://github.com/Saatvik1/MACD-Strategy-Analysis/assets/103705402/1141341e-6688-440c-859f-4696c767672e)

(All times are in EST)
Here we can see the total amount of trades taken per session. Surprisingly, the Overnight Session (ON Session, 22:00 - 08:00) had the highest amount, followed by Regular Trading Hours (RTH) Lunch (11:00 - 15:00) 
and then the Asia session (18:00 - 22:00). RTH Session comes in 4th (09:30 - 11:00), followed by the pre-market (08:00 - 09:30), then the RTH Power Hour (15:00 - 16:00), 
and the After-Session coming in last (16:00 -17:00).

I find this to be an interesting find, considering that a lot of the time the ON session has a much smaller range than RTH. 

![image](https://github.com/Saatvik1/MACD-Strategy-Analysis/assets/103705402/b6387d03-cbde-4e2c-87dd-7e3a3161b5ca)

Although this picture only shows one month, it's just to show that TYPICALLY, the ON Session has a smaller range (meaning less price movement). Further supporting this notion is the fact that volume during the 
ON Session is lower, and the RTH take the lead when it comes to volume. 

![image](https://github.com/Saatvik1/MACD-Strategy-Analysis/assets/103705402/8adf0088-e72c-4a4f-a8e1-82ebcc3e7343)

I previously mentioned that the MACD is flawed in the fact that it only can gauge momentum by price and not volume, stating that both factors are very important. The sessions other than the 3 RTH sessions 
lower in volume and price movement. However, even though the RTH have higher volume and price ranges, the results for the MACD strategy is still not good. 

![image](https://github.com/Saatvik1/MACD-Strategy-Analysis/assets/103705402/01936ce2-ddd1-4b49-b2ec-d000d8fe14a2)

According to this graph, RTH Lunch and RTH Power Hour are one of the bigger losers out of all the sessions, and the only session being profitable is the main RTH Session. Furthermore, 

![image](https://github.com/Saatvik1/MACD-Strategy-Analysis/assets/103705402/cef1c5fd-4da3-458d-889e-174691276680)

Shows that the ratio of winning to losing trades don't improve that much when taking trades only when volume is higher than average (per each session). 
Normal win to loss ratios: 

![image](https://github.com/Saatvik1/MACD-Strategy-Analysis/assets/103705402/ec0a5572-e4fb-4725-a30f-ea253511a45b)

However, the actual loss amount improves. 

![image](https://github.com/Saatvik1/MACD-Strategy-Analysis/assets/103705402/52b55b0c-7848-4b16-b5b9-37ca43280326)

Here we can see that the PNL per session is improved when applying a volume restriction on our trades. So we can see that most of our losses are when there is average or below average volume per session. 

So what are some reasons that a session would have higher than average volume? 
It really depends on the climate of the market, or even the season. For example, when a tech giant like apple releases their quarterly earning, many people are interested in participating, which would increase
volume. Another example would be FOMC meetings, where trading becomes very erratic, so much so that we have memes like this: 

![image](https://github.com/Saatvik1/MACD-Strategy-Analysis/assets/103705402/f6c65ea0-9c45-4146-835f-1ef66c5f1f52)
(Jerome Powell, chair of the federal reserve)

What tends to happen is that most news events (that effect the NASDAQ to a significant degree) do happen during RTH, and more so during the main RTH session. 

Another reason volume tends to increase is that we are at a "point of interest", where price seems to be a good investment. In addition to that, when we break a price range, traders get excited a really 
like to be aggressive in their participation. This will mostly happen during the RTH Session because of multiple factors. 

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

How Can It Be Improved and Summary:

One way to improve the MACD strat would to have a volume threshold for trades. Although it was not a direct indication to greater PNL, it still had a signficant role to play in decreasing 
the losses (last graph shown).

Another change that can be made is a risk to reward implementation. This means that we only risk "x" amount of dollars to make "y" amount. So if I had a R:R (risk to reward) of 1:2, and I only 
want to risk $600 (Average losing trade of RTH Session), then my average reward should be $1,200. This will help get rid of large losers, but also may rid of large winners. However, it can increase more
consistent winners. A trade can be in profit, and then come back to breakeven and then the MACD signal will tell us to exit, this problem can be avoided by having a fixed stop loss and fixed take profit. 

Lastly, the MACD strategy does need a human element, a basic algorithm like this should not dictate our trading accounts, because the market is far more human-like than we think. 

Lastly, in the future, I will work on collecting data regarding which trades are taken during trend days, range days, where in the range, and as well as news events. Given the source of my raw data, however, this 
is a difficult feat to achieve since recording all of that data is expensive. In addition, I will run a test with the additional parameters mentioned above to see how effective they will be. 
This project has put into perspective to me how difficult automate trading can be, and how many complex elements there are. I hope to gain more insight on this topic in the future, and maybe collaborate with anyone
else who is also interested. 

Thank you for reading!

